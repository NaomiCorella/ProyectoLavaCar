@model IEnumerable<ProyectoLavacar.Abstraciones.Modelos.ModeloInventario.InventarioDto>

@{
    ViewBag.Title = "Administración de Inventario";
}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Administración de Usuarios</title>
    <link href="~/Content/assets/css/animate.css" rel="stylesheet" />
    <link href="~/Content/assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/assets/css/default.css" rel="stylesheet" />
    <link href="~/Content/assets/css/magnific-popup.css" rel="stylesheet" />
    <link href="~/Content/assets/css/slick.css" rel="stylesheet" />
    <link href="~/Content/assets/css/style.css" rel="stylesheet" />
    <link href="~/Content/assets/fonts/flaticon/flaticon.css" rel="stylesheet" />
    <link href="~/Content/assets/fonts/fontawesome/css/all.min.css" rel="stylesheet" />
    <style>
        /* Estilos base consistentes */
        .luxury-btn-action {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            color: white;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

            .luxury-btn-action.info {
                background: linear-gradient(135deg, #4fc3f7 0%, #29b6f6 100%);
            }

            .luxury-btn-action.warning {
                background: linear-gradient(135deg, #ffb74d 0%, #ffa726 100%);
            }

            .luxury-btn-action.success {
                background: linear-gradient(135deg, #66bb6a 0%, #4caf50 100%);
            }

            .luxury-btn-action.download {
                background: linear-gradient(135deg, #03a9f4 0%, #0277bd 100%);
            }

            .luxury-btn-action:hover {
                transform: translateY(-2px);
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
                color: white;
                text-decoration: none;
            }

        .luxury-btn-action {
            width: 32px;
            height: 32px;
            margin: 0 5px 5px;
        }

        .luxury-inventory-container {
            padding: 40px 0;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            min-height: 115vh;
        }

        .section-title {
            margin-bottom: 40px;
            position: relative;
        }

        .luxury-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #45C4B0 0%, #9AEBA3 100%);
            border-radius: 50%;
            color: white;
            box-shadow: 0 10px 30px rgba(69, 196, 176, 0.3);
        }

            .luxury-icon svg {
                width: 40px;
                height: 40px;
            }

        .luxury-title {
            font-size: 32px;
            font-weight: 600;
            color: #012030;
            margin-bottom: 15px;
        }

        .luxury-subtitle {
            color: #6c757d;
            font-size: 18px;
            max-width: 600px;
            margin: 0 auto 20px;
        }

        .luxury-divider {
            width: 80px;
            height: 3px;
            background: linear-gradient(90deg, #45C4B0 0%, #9AEBA3 100%);
            margin: 20px auto;
            border-radius: 3px;
        }

        .luxury-card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            margin: 0 auto;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        /* Estilos para botones */
        .luxury-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 24px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .luxury-btn-primary {
            background: linear-gradient(135deg, #45C4B0 0%, #9AEBA3 100%);
            color: white;
        }

            .luxury-btn-primary:hover {
                transform: translateY(-3px);
                box-shadow: 0 8px 16px rgba(69, 196, 176, 0.3);
                color: white;
            }

        .luxury-btn-outline {
            background: transparent;
            border: 2px solid #45C4B0;
            color: #45C4B0;
        }

            .luxury-btn-outline:hover {
                background: #45C4B0;
                color: white;
            }

        /* Estilos para el filtro */
        .luxury-filter-container {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .luxury-filter-input {
            padding: 12px 15px;
            border: 1px solid #ced4da;
            border-radius: 8px;
            font-size: 15px;
            transition: all 0.3s ease;
            width: 100%;
        }

            .luxury-filter-input:focus {
                border-color: #45C4B0;
                box-shadow: 0 0 0 3px rgba(69, 196, 176, 0.1);
                outline: none;
            }

        /* Estilos para la tabla */
        .luxury-table-container {
            width: 100%;
            max-width: 1600px;
            margin: 0 auto;
            overflow-x: auto;
        }
        

        .luxury-table {
            width: 110%;
            border-collapse: collapse;
            font-size: 15px;
        }

        .luxury-table-header {
            background: linear-gradient(135deg, #45C4B0 0%, #9AEBA3 100%);
            color: white;
        }

            .luxury-table-header th {
                padding: 18px;
                text-align: center;
                font-weight: 600;
            }

        .luxury-table-row {
            border-bottom: 1px solid #e0e0e0;
            transition: background-color 0.3s ease;
        }

            .luxury-table-row:hover {
                background-color: rgba(69, 196, 176, 0.05);
            }

            .luxury-table-row td {
                padding: 16px;
                vertical-align: middle;
                text-align: center;
            }

        /* Estilos para badges */
        .luxury-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 14px;
        }

        .luxury-badge-active {
            background-color: rgba(40, 167, 69, 0.1);
            color: #28a745;
        }

        .luxury-badge-inactive {
            background-color: rgba(220, 53, 69, 0.1);
            color: #dc3545;
        }

        /* Estilos para botones de acción */
        .luxury-actions {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .luxury-action-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            min-width: 90px;
        }

            .luxury-action-btn i {
                font-size: 14px;
            }

        .btn-edit {
            background-color: rgba(0, 123, 255, 0.1);
            color: #007bff;
            border: 1px solid #007bff;
        }

            .btn-edit:hover {
                background-color: #007bff;
                color: white;
            }

        .btn-details {
            background-color: rgba(23, 162, 184, 0.1);
            color: #17a2b8;
            border: 1px solid #17a2b8;
        }

            .btn-details:hover {
                background-color: #17a2b8;
                color: white;
            }

        .btn-inactivate {
            background-color: rgba(255, 193, 7, 0.1);
            color: #ffc107;
            border: 1px solid #ffc107;
        }

            .btn-inactivate:hover {
                background-color: #ffc107;
                color: #212529;
            }

        .btn-activate {
            background-color: rgba(40, 167, 69, 0.1);
            color: #28a745;
            border: 1px solid #28a745;
        }

            .btn-activate:hover {
                background-color: #28a745;
                color: white;
            }

        .btn-pdf {
            background-color: rgba(108, 117, 125, 0.1);
            color: #6c757d;
            border: 1px solid #6c757d;
        }

            .btn-pdf:hover {
                background-color: #6c757d;
                color: white;
            }

        /* Responsive design */
        @@media (max-width: 992px) {
            .luxury-actions {
                flex-direction: column;
                gap: 6px;
            }

            .luxury-action-btn {
                width: 100%;
            }
        }

        @@media (max-width: 768px) {
            .luxury-table-header th {
                padding: 14px 8px;
                font-size: 14px;
            }

            .luxury-table-row td {
                padding: 12px 8px;
                font-size: 14px;
            }

            .luxury-action-btn {
                padding: 6px 10px;
                font-size: 13px;
                min-width: auto;
            }
        }

        @@media (max-width: 576px) {
            .luxury-title {
                font-size: 28px;
            }

            .luxury-table-header {
                display: none;
            }

            .luxury-table-row {
                display: block;
                margin-bottom: 20px;
                border-radius: 10px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
                overflow: hidden;
            }

                .luxury-table-row td {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding: 12px;
                    border-bottom: 1px solid #f0f0f0;
                    text-align: right;
                }

                    .luxury-table-row td:before {
                        content: attr(data-label);
                        font-weight: 600;
                        color: #45C4B0;
                        margin-right: 15px;
                    }

                    .luxury-table-row td:last-child {
                        border-bottom: none;
                        justify-content: center;
                    }

            .luxury-actions {
                flex-direction: row;
                justify-content: flex-end;
            }
            .dt-paging {
                display: flex;
                justify-content: flex-end !important;
                margin-top: 10px;
            }
                .dt-paging .paginate_button {
                    margin: 0 5px; /* Espaciado entre los botones */
                    padding: 5px 10px; /* Ajuste de tamaño de los botones */
                    background-color: #007bff; /* Color de fondo */
                    color: white; /* Color de texto */
                    border-radius: 5px; /* Bordes redondeados */
                }

                    .dt-paging .paginate_button:hover {
                        background-color: #0056b3; /* Color de fondo al pasar el mouse */
                        cursor: pointer;
                    }
        }
    </style>
</head>
<body>
    <div class="luxury-inventory-container">
        <div class="container">
            <div class="section-title text-center">
                <div class="luxury-icon">
                    <svg viewBox="0 0 24 24">
                        <path fill="currentColor" d="M12 3L2 12H5V20H19V12H22L12 3M12 7.7C14.1 7.7 15.8 9.4 15.8 11.5C15.8 14.5 12 18 12 18C12 18 8.2 14.5 8.2 11.5C8.2 9.4 9.9 7.7 12 7.7M12 10C11.2 10 10.5 10.7 10.5 11.5C10.5 12.3 11.2 13 12 13C12.8 13 13.5 12.3 13.5 11.5C13.5 10.7 12.8 10 12 10Z" />
                    </svg>
                </div>
                <h2 class="luxury-title">@ViewBag.Title</h2>
                <p class="luxury-subtitle">Administra los productos disponibles en tu inventario</p>
                <div class="luxury-divider"></div>
            </div>

            <div class="luxury-card">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <a href="@Url.Action("Create", "Inventario")" class="luxury-btn luxury-btn-primary">
                        <i class="fas fa-plus"></i> Agregar Producto
                    </a>

                    <div class="luxury-actions">
                        <button type="submit" class="abrirModalMovimiento luxury-btn luxury-btn-outline">
                            <i class="fas fa-exchange-alt"></i> Registrar Movimiento
                        </button>
                        <a href="@Url.Action("HistorialDeMovimientos")" class="luxury-btn luxury-btn-outline">
                            <i class="fas fa-history"></i> Historial
                        </a>
                        <a href="@Url.Action("DescargarPDF")" class="luxury-btn luxury-btn-outline">
                            <i class="fas fa-file-pdf"></i> Exportar PDF
                        </a>
                    </div>
                </div>

                <div class="luxury-filter-container">
                    <form method="get" action="@Url.Action("FiltrarPorProducto", "Inventario")" class="row g-3">
                        <div class="col-md-8">
                            <input type="text" name="nombreProducto" class="luxury-filter-input" placeholder="Buscar producto..." />
                        </div>
                        <div class="col-md-4">
                            <button type="submit" class="luxury-btn luxury-btn-primary w-100">
                                <i class="fas fa-search"></i> Buscar
                            </button>
                        </div>
                    </form>
                </div>

                <div class="luxury-table-container">
                    <table class="luxury-table" id="myTable">
                        <thead class="luxury-table-header">
                            <tr>
                                @*<th>@Html.DisplayNameFor(model => model.idProducto)</th>*@
                                <th>@Html.DisplayNameFor(model => model.nombre)</th>
                                <th>@Html.DisplayNameFor(model => model.categoria)</th>
                                <th>@Html.DisplayNameFor(model => model.precioUnitario)</th>
                                <th>@Html.DisplayNameFor(model => model.cantidadDisponible)</th>
                                <th>@Html.DisplayNameFor(model => model.estado)</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {
                                <tr class="luxury-table-row">
                                    @*<td data-label="ID">@Html.DisplayFor(modelItem => item.idProducto)</td>*@
                                    <td data-label="Nombre">@Html.DisplayFor(modelItem => item.nombre)</td>
                                    <td data-label="Categoría">@Html.DisplayFor(modelItem => item.categoria)</td>
                                    <td data-label="Precio">@Html.DisplayFor(modelItem => item.precioUnitario)</td>
                                    <td data-label="Cantidad">@Html.DisplayFor(modelItem => item.cantidadDisponible)</td>
                                    <td data-label="Estado">
                                        @if (item.estado)
                                        {
                                            <span class="luxury-badge ">Activo</span>
                                        }
                                        else
                                        {
                                            <span class="luxury-badge ">Inactivo</span>
                                        }
                                    </td>
                                    <td>
                                        <div class="luxury-actions">
                                            <a href="@Url.Action("Edit", new { id = item.idProducto })" class="luxury-btn-action info me-2 mb-2" title="Detalles" data-bs-toggle="tooltip">
                                                <i class="fas fa-info-circle"></i>
                                            </a>


                                            <a href="@Url.Action("Details", new { id = item.idProducto })" class="luxury-btn-action info me-2 mb-2" title="Detalles" data-bs-toggle="tooltip">
                                                <i class="fas fa-clipboard-check"></i>
                                            </a>
                                            @if (item.estado)
                                            {
                                                <a href="@Url.Action("CambiarEstado", new { id = item.idProducto })" class="luxury-btn-action warning me-2 mb-2" title="Inactivar" data-bs-toggle="tooltip">
                                                    <i class="fas fa-times-circle"></i>
                                                </a>
                                            }
                                            else
                                            {
                                                <a href="@Url.Action("CambiarEstado", new { id = item.idProducto })" class="luxury-btn-action success me-2 mb-2" title="Activar" data-bs-toggle="tooltip">
                                                    <i class="fas fa-check-circle"></i>
                                                </a>
                                            }
                                            <a href="@Url.Action("DescargarPDFDetalle", new { id = item.idProducto })" class="luxury-btn-action download me-2 mb-2" title="Descargar" data-bs-toggle="tooltip">
                                                <i class="fas fa-download"></i>
                                            </a>

                                        </div>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para movimientos -->
    <div id="ModalDeMovimiento" class="modal fade" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header" style="background: linear-gradient(135deg, #45C4B0 0%, #9AEBA3 100%); color: white;">
                    <h4 class="modal-title">Registrar Movimiento</h4>
                    <button type="button" class="close" data-dismiss="modal" style="color: white;">&times;</button>
                </div>
                <div class="modal-body">
                    <p>Contenido del modal de movimientos...</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="luxury-btn luxury-btn-outline" data-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    @section Scripts {
        @Scripts.Render("~/bundles/jqueryval")

        <script src="~/Scripts/Inventario/ModalMovimiento.js"></script>

    }
    <script src="~/Content/assets/js/vendor/jquery-1.12.4.min.js"></script>
    <script src="~/Content/assets/js/vendor/modernizr-3.6.0.min.js"></script>
    <script src="~/Content/assets/js/bootstrap.min.js"></script>
    <script src="~/Content/assets/js/imagesloaded.pkgd.min.js"></script>
    <script src="~/Content/assets/js/isotope.pkgd.min.js"></script>
    <script src="~/Content/assets/js/jquery.counterup.min.js"></script>
    <script src="~/Content/assets/js/jquery.magnific-popup.min.js"></script>
    <script src="~/Content/assets/js/main.js"></script>
    <script src="~/Content/assets/js/popper.min.js"></script>
    <script src="~/Content/assets/js/slick.min.js"></script>
    <script src="~/Content/assets/js/waypoints.min.js"></script>
    <script src="~/Content/assets/js/wow.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/2.2.2/js/dataTables.min.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let table = new DataTable('#myTable', {
                pageLength: 10,
                lengthMenu: [5, 10, 25, 50, 100],  // Opciones de cantidad de registros
                searching: false,  // Elimina la caja de búsqueda
                language: {
                    lengthMenu: 'Mostrar _MENU_ registros por página',
                    zeroRecords: 'No se encontraron registros',
                    info: 'Mostrando página _PAGE_ de _PAGES_',
                    infoEmpty: 'No hay registros disponibles',
                    infoFiltered: '(filtrado de _MAX_ registros en total)',
                    //"paginate": {
                    //    "first": "Primera",
                    //    "previous": "Anterior",
                    //    "next": "Siguiente",
                    //    "last": "Última"
                    //}
                }
            });
        });

    </script>
</body>

</html>