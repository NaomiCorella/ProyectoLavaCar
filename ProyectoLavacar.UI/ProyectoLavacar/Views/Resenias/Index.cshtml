@model IEnumerable<ProyectoLavacar.Abstraciones.Modelos.ModuloReseñas.ReseniaConRespuesta>

@{
    ViewBag.Title = "Index";
}

<!DOCTYPE html>
<html lang="zxx">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Administración de Empleados</title>
    <link href="~/Content/assets/css/animate.css" rel="stylesheet" />
    <link href="~/Content/assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/assets/css/default.css" rel="stylesheet" />
    <link href="~/Content/assets/css/magnific-popup.css" rel="stylesheet" />
    <link href="~/Content/assets/css/slick.css" rel="stylesheet" />
    <link href="~/Content/assets/css/style.css" rel="stylesheet" />
    <link href="~/Content/assets/fonts/flaticon/flaticon.css" rel="stylesheet" />
    <link href="~/Content/assets/fonts/fontawesome/css/all.min.css" rel="stylesheet" />
</head>
<p>
    @Html.ActionLink("Create New", "Create")
</p>
<body>

    @using (Html.BeginForm("Index", "Resenias", FormMethod.Get))
    {
        <div class="container mt-5 mb-5">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2 class="mb-0">Administración de Reseñas</h2>
                <div class="d-flex">
                    <select name="ordenarPor" id="ordenarPor" class="form-control mr-2">
                        <option value="fecha" @(Request["ordenarPor"] == "fecha" ? "selected" : "")>Fecha</option>
                        <option value="calificacion" @(Request["ordenarPor"] == "calificacion" ? "selected" : "")>Calificación</option>
                    </select>
                    <select name="orden" id="orden" class="form-control">
                        <option value="asc" @(Request["orden"] == "asc" ? "selected" : "")>Ascendente</option>
                        <option value="desc" @(Request["orden"] == "desc" ? "selected" : "")>Descendente</option>
                    </select>
                    <button type="submit" class="btn btn-primary ml-2">Ordenar</button>
                </div>
            </div>
        </div>
    }
    @using (Html.BeginForm(null, null, FormMethod.Post, new { id = "miFormulario" }))
    {
        <div class="container mt-5 mb-5">


            <div class="table-responsive shadow-lg rounded">
                <table class="table table-bordered table-striped text-center">
                    <thead class="table-dark">
                        <tr>
                            <th>
                                @Html.DisplayNameFor(model => model.idResenia)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.idCliente)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.idServicio)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.fecha)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.calificacion)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.comentarios)
                            </th>


                            <th>
                                @Html.DisplayNameFor(model => model.comentariosRespuesta)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.estadoResenia)
                            </th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {
                            <tr>
                                <td>
                                    @Html.DisplayFor(modelItem => item.idResenia)
                                </td>

                                <td>
                                    @Html.DisplayFor(modelItem => item.idCliente)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.idServicio)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.fecha)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.calificacion)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.comentarios)
                                </td>


                                <td>
                                    @if (string.IsNullOrEmpty(item.comentariosRespuesta))
                                    {
                                        <span>No hay respuesta</span>
                                    }
                                    else
                                    {
                                        @Html.DisplayFor(modelItem => item.comentariosRespuesta)
                                    }
                                </td>

                                <td>
                                    @if (item.estadoResenia)
                                    {
                                        <span class="badge bg-success">Activo</span>
                                    }
                                    else
                                    {
                                        <span class="badge bg-danger">Inactivo</span>
                                    }
                                </td>
                                
                                <td>
                                    <div class="d-flex justify-content-center">
                                        <a href="@Url.Action("Edit", new { id = item.idResenia })" class="btn btn-outline-info btn-sm me-2" title="Editar">
                                            <i class="fas fa-edit"></i> Editar
                                        </a>


                                        @if (item.estadoResenia)
                                        {
                                            <a href="@Url.Action("CambiarEstado", new { id = item.idResenia })" class="btn btn-sm btn-outline-warning">
                                                <i class="fas fa-times-circle"></i> Inactivar
                                            </a>
                                        }
                                        else
                                        {
                                            <a href="@Url.Action("CambiarEstado", new { id = item.idResenia })" class="btn btn-sm btn-outline-success">
                                                <i class="fas fa-check-circle"></i> Activar
                                            </a>
                                        }
                                        @if (string.IsNullOrEmpty(item.comentariosRespuesta))
                                        {
                                            <a href="@Url.Action("ResponderReseña", new { id = item.idResenia })" class="btn btn-outline-info btn-sm me-2" title="Editar">
                                                <i class="fas fa-edit"></i> Responder
                                            </a>
                                        }
                                        else
                                        {

                                        }

                                    </div>

                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>

        </div>
    }
    
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="~/Scripts/Resenias/AlertaEliminar_Inactivar.js"></script>
    <script src="~/Content/assets/js/vendor/jquery-1.12.4.min.js"></script>
    <script src="~/Content/assets/js/vendor/modernizr-3.6.0.min.js"></script>
    <script src="~/Content/assets/js/bootstrap.min.js"></script>
    <script src="~/Content/assets/js/imagesloaded.pkgd.min.js"></script>
    <script src="~/Content/assets/js/isotope.pkgd.min.js"></script>
    <script src="~/Content/assets/js/jquery.counterup.min.js"></script>
    <script src="~/Content/assets/js/jquery.magnific-popup.min.js"></script>
    <script src="~/Content/assets/js/main.js"></script>
    <script src="~/Content/assets/js/popper.min.js"></script>
    <script src="~/Content/assets/js/slick.min.js"></script>
    <script src="~/Content/assets/js/waypoints.min.js"></script>
    <script src="~/Content/assets/js/wow.min.js"></script>
</body>

</html>